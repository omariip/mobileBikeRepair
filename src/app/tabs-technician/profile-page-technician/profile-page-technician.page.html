<h1>
  <ion-title>Your Profile</ion-title>
</h1>

<ion-content>
  <ion-card>
    <ion-item>
      <ion-icon name="accessibility" slot="start"></ion-icon>
      <ion-label>Name</ion-label>
    </ion-item>
    <ion-card-content *ngIf="technicianInfo !== null">
      <h3>{{technicianInfo.technicianName}}</h3>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-item>
      <ion-icon name="mail" slot="start"></ion-icon>
      <ion-label>Email</ion-label>
      <!--<ion-button fill="outline" slot="end">Edit</ion-button>-->
    </ion-item>
    <ion-card-content *ngIf="technicianInfo !== null">
      <h3>{{technicianInfo.technicianEmail}}</h3>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-item>
      <ion-icon name="call" slot="start"></ion-icon>
      <ion-label>Phone</ion-label>
      <ion-button fill="outline" slot="end" (ngSubmit)="editPhoneNumber()">Edit</ion-button>
    </ion-item>


    <!-- <form id="editPh" [formGroup]="editForm1" (ngSubmit)="submit()">
    <ion-item  lines="full">
      <ion-label position="floating">Phone Number</ion-label>
      <ion-input type="text" formControlName="phone" placeholder="0123456789"></ion-input>
      <!-- Error Message 
      <span>
        <ng-container
          *ngIf="editForm1.get('phone').hasError('required') && (editForm1.get('phone').touched || editForm1.get('phone').dirty)">
          <ion-icon name="close-circle" size="small"></ion-icon>
          <small >please enter your phone number</small>
        </ng-container>
        <ng-container
          *ngIf="editForm1.get('phone').hasError('pattern') && (editForm1.get('phone').touched || editForm1.get('phone').dirty)">
          <ion-icon name="close-circle" size="small"></ion-icon>
          <small >please enter phone number in format 0123456789</small>
        </ng-container>
      </span>
    </ion-item>

    <ion-button type="submit" [disabled]="!editForm1.valid">
      Done
    </ion-button>
  </form>
-->



    <ion-card-content id="editPh2" *ngIf="technicianInfo !== null">
      <h3>{{technicianInfo.technicianPhone}}</h3>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-item>
      <ion-icon name="location" slot="start"></ion-icon>
      <ion-label>Address</ion-label>
      <ion-button fill="outline" slot="end">Edit</ion-button>
    </ion-item>
    <ion-card-content *ngIf="technicianInfo !== null">
      <h3>{{technicianInfo.technicianAddress.street}}</h3>
      <h3>{{technicianInfo.technicianAddress.city}}</h3>
      <h3>{{technicianInfo.technicianAddress.province}}</h3>
      <h3>{{technicianInfo.technicianAddress.postal}}</h3>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-item>
      <ion-icon name="briefcase" slot="start"></ion-icon>
      <ion-label>Insurance Company</ion-label>
      <!--<ion-button fill="outline" slot="end">Edit</ion-button>-->
    </ion-item>
    <ion-card-content *ngIf="technicianInfo !== null">
      <h3>{{technicianInfo.technicianInsurance.insuranceCompany}}</h3>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-item>
      <ion-icon name="shield-checkmark" slot="start"></ion-icon>
      <ion-label>Insurance Number</ion-label>
      <!--<ion-button fill="outline" slot="end">Edit</ion-button>-->
    </ion-item>
    <ion-card-content *ngIf="technicianInfo !== null">
      <h3>{{technicianInfo.technicianInsurance.insuranceNumber}}</h3>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-item>
      <ion-icon name="construct" slot="start"></ion-icon>
      <ion-label>Services and Pricing</ion-label>
      <ion-button fill="outline" slot="end" id="open-modal" expand="block">Add</ion-button><br>
    </ion-item>
    <ion-card-content *ngIf="technicianInfo?.service !== null">

      <ion-card *ngFor="let s of technicianInfo.service; index as i">
        <ion-item>
          <ion-label>{{s.title}}</ion-label>
          <ion-label slot="end">${{s.price}}</ion-label>
          <ion-icon name="ellipsis-vertical" size="small" slot="end" id="{{'popover-button' + i}}"></ion-icon>
        </ion-item>
        <ion-card-content>
          <ion-label>{{s.description}}</ion-label>
        </ion-card-content>
        <ion-popover trigger="{{'popover-button' + i}}" [dismissOnSelect]="true">
          <ng-template>
            <ion-content>
                <ion-item [button]="true" [detail]="false" (click)="delete(i)">Delete</ion-item>
            </ion-content>
          </ng-template>
        </ion-popover>
      </ion-card>

      
    </ion-card-content>
  </ion-card>


  <ion-modal trigger="open-modal">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button (click)="cancel()">Cancel</ion-button>
          </ion-buttons>
          <ion-title>Add Service and Pricing</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="confirm()" [disabled]="title === '' || price === ''" [strong]="true">Add</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-label position="floating">Service Title</ion-label>
          <ion-input type="text" [(ngModel)]="title"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Description (optional)</ion-label>
          <ion-textarea placeholder="Describe the service" rows="7" [(ngModel)]="description"></ion-textarea>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Price of Service</ion-label>
          <ion-input type="number" [(ngModel)]="price"></ion-input>
        </ion-item>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>